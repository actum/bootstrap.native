// Native Javascript for Bootstrap 3 | Collapse
// by dnp_theme
var Collapse=function(t,e){this.btn="object"==typeof t?t:document.querySelector(t),this.accordion=null,this.collapse=null,this.options={},this.duration=300,this.options.duration=document.documentElement.classList.contains("ie")?0:e.duration||this.duration,this.init()};Collapse.prototype={init:function(){this.actions(),this.btn.addEventListener("click",this.toggle,!1),document.addEventListener("click",this.update,!1),window.addEventListener("resize",this.update,!1)},actions:function(){var t=this;this.toggle=function(e){t.btn=t.getTarget(e).btn,t.collapse=t.getTarget(e).collapse,t.collapse.classList.contains("in")?t.close(e):t.open(e)},this.close=function(e){e.preventDefault(),t.btn=t.getTarget(e).btn,t.collapse=t.getTarget(e).collapse,t._close(t.collapse),t.btn.classList.remove("collapsed")},this.open=function(e){if(e.preventDefault(),t.btn=t.getTarget(e).btn,t.collapse=t.getTarget(e).collapse,t.accordion=t.btn.getAttribute("data-parent")&&t.getClosest(t.btn,t.btn.getAttribute("data-parent")),t._open(t.collapse),t.btn.classList.add("collapsed"),null!==t.accordion){var n=t.accordion.querySelectorAll(".collapse.in");[].forEach.call(n,function(e){e!==t.collapse&&t._close(e)})}},this._open=function(e){e.classList.add("in"),e.style.height=0,e.style.overflow="hidden",e.setAttribute("area-expanded","true");var n=this.getMaxHeight(e).oh,o=this.getMaxHeight(e).br;e.style.height=n+o+"px",setTimeout(function(){e.style.overflow=""},t.options.duration)},this._close=function(e){e.style.overflow="hidden",e.style.height=0,setTimeout(function(){e.classList.remove("in"),e.style.overflow="",e.setAttribute("area-expanded","false")},t.options.duration)},this.update=function(e){var n=e.type,o=e.target,r=document.querySelectorAll(".collapse.in");[].forEach.call(r,function(e){var r=t.getMaxHeight(e).oh,a=t.getMaxHeight(e).br;("resize"===n||"click"===n&&t.getClosest(o,".collapse")===e)&&setTimeout(function(){e.style.height=r+a+"px"},300)})},this.getMaxHeight=function(t){var e=t.children[0],n=t.currentStyle||window.getComputedStyle(t);return{oh:getOuterHeight(e),br:parseInt(n.borderTop||0)+parseInt(n.borderBottom||0)}},this.getTarget=function(t){var e=t.currentTarget||t.srcElement,n=e.href&&e.getAttribute("href").replace("#",""),o=e.getAttribute("data-target")&&e.getAttribute("data-target"),r=n||o&&/#/.test(o)&&o.replace("#",""),a=o&&"."===o.charAt(0)&&o,i=r&&document.getElementById(r)||a&&document.querySelector(a);return{btn:e,collapse:i}},this.getClosest=function(t,e){for(var n=e.charAt(0);t&&t!==document;t=t.parentNode){if("."===n&&t.classList.contains(e.substr(1)))return t;if("#"===n&&t.id===e.substr(1))return t}return!1}}};var getOuterHeight=function(t){var e=t.currentStyle||window.getComputedStyle(t);return t.offsetHeight+parseInt(/px/.test(e.marginTop)?Math.round(e.marginTop.replace("px","")):0)+parseInt(/px/.test(e.marginBottom)?Math.round(e.marginBottom.replace("px","")):0)+parseInt(/em/.test(e.marginTop)?Math.round(e.marginTop.replace("em","")*parseInt(e.fontSize)):0)+parseInt(/em/.test(e.marginBottom)?Math.round(e.marginBottom.replace("em","")*parseInt(e.fontSize)):0)},Collapses=document.querySelectorAll('[data-toggle="collapse"]');[].forEach.call(Collapses,function(t){var e={};return e.duration=t.getAttribute("data-duration"),new Collapse(t,e)}),window.addEventListener("load",function(){var t=document.querySelectorAll(".collapse");[].forEach.call(t,function(t){if(t.classList.contains("in")){var e=t.currentStyle||window.getComputedStyle(t),n=getOuterHeight(t.children[0]),o=parseInt(e.borderTop||0)+parseInt(e.borderBottom||0);t.style.height=n+o+"px"}})});
